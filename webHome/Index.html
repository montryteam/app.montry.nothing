<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Lambo — AI Search Engine</title>

  <style>
    :root { --accent: #00e5ff; --bg: #000; --fg: #fff; }

    body {
      margin: 0;
      background: var(--bg);
      color: var(--fg);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      display: flex;
      justify-content: center;
      padding: 20px;
    }

    .container {
      width: min(900px, 100%);
      text-align: center;
    }

    .brand {
      font-size: 52px;
      font-weight: 800;
      margin-top: 20px;
      margin-bottom: 10px;
    }

    .tag {
      color: #9aa0a6;
      margin-bottom: 25px;
      font-size: 16px;
    }

    /* Search Bar */
    .search-box {
      display: flex;
      gap: 8px;
      padding: 0 10px;
    }

    input.search {
      flex: 1;
      padding: 16px;
      font-size: 18px;
      border-radius: 12px;
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.15);
      color: #fff;
      outline: none;
    }

    button.go {
      padding: 14px 18px;
      border-radius: 12px;
      border: 0;
      background: linear-gradient(90deg, #00e5ff, #6affd7);
      font-weight: 700;
      cursor: pointer;
    }

    /* Suggestions */
    .suggestions {
      margin: 15px 0;
      font-size: 14px;
      color: #8a8a8a;
    }

    /* Result Cards layout */
    .results {
      margin-top: 28px;
      text-align: left;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .card {
      background: rgba(255,255,255,0.04);
      padding: 18px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.07);
      transition: transform .15s;
    }

    .card:hover {
      transform: translateY(-3px);
    }

    .link {
      color: var(--accent);
      text-decoration: none;
      font-size: 15px;
      word-break: break-all;
    }

    .history {
      margin-top: 25px;
      padding: 10px;
      color: #bbb;
      font-size: 14px;
    }

    .history-item {
      margin: 4px 0;
      cursor: pointer;
      color: #00e5ff;
      text-decoration: underline;
    }

    .powered {
      margin-top: 35px;
      color: #7c7c7c;
      font-size: 13px;
    }

    /* Mobile Optimization */
    @media (max-width: 480px) {
      .brand { font-size: 38px; }
      .tag { font-size: 14px; }
      input.search { font-size: 16px; padding: 14px; }
      button.go { padding: 12px 14px; font-size: 14px; }
    }
  </style>
</head>

<body>
<div class="container">
  <div class="brand">Lambo</div>
  <div class="tag">AI-powered search. Enter a question or a full URL.</div>

  <div class="search-box">
    <input id="q" class="search" placeholder="Search or paste a link..." />
    <button id="go" class="go">Search</button>
  </div>

  <div class="suggestions">
    Example: https://example.com • breaking news • best cafes near me
  </div>

  <div class="results" id="results"></div>

  <div class="history" id="history"></div>

  <div class="powered">Powered by Lambo • Gemini API</div>
</div>

<script>
  /* REQUIRED CONFIG */
  const GEMINI_API_ENDPOINT = "https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-lite:generateContent?key=AIzaSyCy7KOUsFRZHXclQJZfpAI5nMjKcIbJoNY";
  const GEMINI_API_KEY = "
AIzaSyCy7KOUsFRZHXclQJZfpAI5nMjKcIbJoNY";

  const input = document.getElementById("q");
  const btn = document.getElementById("go");
  const results = document.getElementById("results");
  const historyBox = document.getElementById("history");

  let history = [];

  function saveHistory(text) {
    history.push(text);
    updateHistory();
  }

  function updateHistory() {
    historyBox.innerHTML = "<strong>History:</strong><br>" +
      history.map(h => `<div class='history-item' onclick="loadFromHistory('${h.replace(/'/g,"")}')">${h}</div>`).join("");
  }

  function loadFromHistory(text) {
    input.value = text;
    handleSearch();
  }

  function isUrl(t) {
    return /^https?:\/\//i.test(t) || (t.includes(".") && !t.includes(" "));
  }

  btn.addEventListener("click", handleSearch);
  input.addEventListener("keydown", e => {
    if (e.key === "Enter") handleSearch();
  });

  async function handleSearch() {
    const q = input.value.trim();
    if (!q) return;

    saveHistory(q);

    results.innerHTML = "";

    if (isUrl(q)) {
      let url = q.startsWith("http") ? q : "https://" + q;
      results.innerHTML = `<div class='card'>Redirecting to <a class='link' href='${url}'>${url}</a></div>`;
      setTimeout(() => window.location.href = url, 500);
      return;
    }

    results.innerHTML = `<div class='card'>Lambo is thinking...</div>`;
    queryGemini(q);
  }

  async function queryGemini(inputText) {
    const body = {
      prompt: inputText,
      max_output_tokens: 300
    };

    try {
      const response = await fetch(GEMINI_API_ENDPOINT, {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": "Bearer " + GEMINI_API_KEY
        },
        body: JSON.stringify(body)
      });

      const json = await response.json();
      let output =
        json.output?.[0]?.text ||
        json.output?.[0]?.content ||
        json.result ||
        JSON.stringify(json);

      const url = extractUrl(output);

      if (url) {
        results.innerHTML = `<div class='card'>Redirecting: <a class='link' href='${url}'>${url}</a></div>`;
        setTimeout(() => window.location.href = url, 700);
        return;
      }

      results.innerHTML =
        `<div class='card'><pre style="white-space:pre-wrap;color:#ddd">${escape(output)}</pre></div>`;

    } catch (err) {
      results.innerHTML = `<div class='card'>Error: ${escape(err.message)}</div>`;
    }
  }

  function extractUrl(text) {
    const m = text.match(/https?:\/\/[^\s]+/i);
    return m ? m[0] : null;
  }

  function escape(str) {
    return str.replace(/[&<>\"']/g, t => ({
      "&": "&amp;",
      "<": "&lt;",
      ">": "&gt;",
      "\"": "&quot;",
      "'": "&#39;"
    }[t]));
  }
</script>

</body>
</html>
